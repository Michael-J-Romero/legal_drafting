# Notes View Enhancement - Feature Documentation

## Overview
The Notes view now supports filtering and navigation to note sources, making it easy to find specific notes and jump directly to where they came from.

## New Features

### 1. Filter Controls

#### Filter by Source
Located at the top of the Notes view, this dropdown allows you to filter notes by their source type:

```
Filter by Source: [Dropdown]
â”œâ”€â”€ All Sources (shows all notes)
â”œâ”€â”€ ğŸŒ Website (notes from web research)
â”œâ”€â”€ ğŸ“„ Document (notes from uploaded documents)
â”œâ”€â”€ ğŸ‘¤ User Input (notes from user messages)
â”œâ”€â”€ ğŸ¤– AI Agent (notes generated by AI)
â”œâ”€â”€ ğŸ” Research (notes from research tasks)
â””â”€â”€ ğŸ’¬ Conversation (notes from conversations)
```

#### Filter by Context
This dropdown filters notes based on which context fields are present:

```
Filter by Context: [Dropdown]
â”œâ”€â”€ All Context (shows all notes)
â”œâ”€â”€ Has Who (shows notes with "who" information)
â”œâ”€â”€ Has What (shows notes with "what" information)
â”œâ”€â”€ Has When (shows notes with "when" information)
â””â”€â”€ Has Where (shows notes with "where" information)
```

#### Filter Counter
Shows the number of notes currently displayed vs total:
```
Showing 5 of 12 notes
```

### 2. Clickable Notes

#### Visual Indicators
When you hover over a note:
- The note card lifts slightly (translateY -2px)
- A subtle shadow appears
- Text appears: "â†’ Click to view source"
- Cursor changes to pointer

#### Navigation Behavior

**Document Notes:**
When you click a note from a document:
1. The app switches to the "Documents" tab
2. The specific document is automatically selected
3. You can see the full document context

**Chat Notes:**
When you click a note from chat (AI Agent, User Input, Conversation):
1. The app switches to the "Main Chat" tab
2. You can see the conversation context

**Website Notes:**
When you click a note from a website:
1. The URL opens in a new browser tab
2. You can view the original source

### 3. Empty States

**No Notes Yet:**
```
ğŸ“ No notes yet
The AI will create notes as you chat about dates, documents, goals, etc.
```

**No Matching Filters:**
```
ğŸ” No notes match the selected filters
Try adjusting your filters to see more notes
```

## Example Use Cases

### Use Case 1: Finding All Document Notes
1. Open the Notes tab
2. Click "Filter by Source" dropdown
3. Select "ğŸ“„ Document"
4. See only notes extracted from documents
5. Click any note to jump to that document

### Use Case 2: Finding Notes with Dates
1. Open the Notes tab
2. Click "Filter by Context" dropdown
3. Select "Has When"
4. See only notes that have temporal information
5. Click a note to see its source

### Use Case 3: Quick Document Navigation
1. See a note about "Contract deadline: March 15, 2024"
2. Click the note
3. Automatically navigate to Documents tab
4. The contract document is selected and displayed
5. Can see the full document and all related notes

## Technical Details

### Source Tracking
Every note includes detailed source information:
```typescript
{
  source: {
    type: 'document',
    documentName: 'Employment_Contract.pdf',
    metadata: {
      documentId: 'doc-abc123'
    }
  }
}
```

### Navigation Flow
```
Note Click
    â†“
handleNoteClick(note)
    â†“
Check note.source.type
    â†“
    â”œâ”€â†’ 'document' â†’ Switch to Documents tab + Select document
    â”œâ”€â†’ 'agent_ai' â†’ Switch to Main Chat tab
    â”œâ”€â†’ 'user_prompt' â†’ Switch to Main Chat tab
    â””â”€â†’ 'website' â†’ Open URL in new tab
```

### Cross-Component Communication
```
Page Component (handleNoteClick)
    â†“
localStorage.setItem('selectedDocumentId', docId)
    â†“
window.dispatchEvent(CustomEvent('selectDocument'))
    â†“
DocumentsView (event listener)
    â†“
setSelectedDocumentId(docId)
```

## Benefits

1. **Quick Access**: Jump directly to note sources with one click
2. **Better Organization**: Filter notes by source or context
3. **Clear Tracking**: Always know where a note came from
4. **Efficient Workflow**: No more searching for documents or conversations
5. **Visual Feedback**: Clear hover states and click indicators

## Future Enhancements

Possible improvements:
- Multi-select filters (e.g., show Documents AND Websites)
- Date range filters (e.g., notes from last week)
- Full-text search within notes
- Sort options (by date, confidence, category)
- Bulk operations (delete multiple notes)
- Export filtered notes
